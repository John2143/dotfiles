#!/bin/bash
xrandr --output DP-4 --mode 1920x1080 --rate 144.0
xrandr --output DP-0 --mode 2560x1440 --rate 239.96 --right-of DP-4 --primary
xrandr --output DP-2 --off
setxkbmap -option "ctrl:nocaps"
dbus-update-activation-environment --systemd DBUS_SESSION_BUS_ADDRESS DISPLAY XAUTHORITY

killall polybar
killall sxhkd

sleep .1

polybar -r 1 &
polybar -r 2 &
sxhkd &
#killall nitrogen
#nitrogen --restore &

xset dpms 6000 6000 12000

bspc config border_width         0
bspc config window_gap           1
bspc config focused_border_color \#ffffff
bspc config normal_border_color  \#1d2021

bspc config split_ratio          0.52
bspc config borderless_monocle   false
bspc config gapless_monocle      false

#bspc rule -a firefoxdeveloperedition desktop='^1'
# https://github.com/baskerville/bspwm/issues/291
# only works due to https://github.com/dasJ/spotifywm
#bspc rule -a Spotify desktop='^6' state=pseudo_tiled
#bspc rule -a ulauncher focus=on
#bspc rule -a sxiv state=floating center=true
bspc rule -a polybar border=off manage=off
bspc rule -a Steam floating=on follow=no

bspc monitor DP-0 -d A1 A2 A3 A4 A5 A6 A7 A8 A9
bspc monitor DP-4 -d B1 B2 B3 B4 B5 B6 B7 B8 B9

sleep 1
sudo systemctl restart dnscrypt-proxy
sudo modprobe i2c-dev
sudo modprobe i2c-i801
notify-send "Desktop ready"
